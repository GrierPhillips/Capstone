{% extends '/layouts/main.html' %}
{% block title %}
  Write a review
{% endblock %}
{% block header %}
<header>
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="intro-text">
                  <span class="name">Review a course you've played</span>
                  <hr>
                  <span class="skills">Review as many courses as possible to get the best recommendations.</span>
              </div>
          </div>
      </div>
  </div>
</header>
{% endblock %}
{% block content %}
<section class="success" id="about">
  <div class="container">
      <div class="row">
        <div class='col-md-12'>
          {% if error %}
            <p><strong>Error:</strong> {{ error }}
          {% endif %}
          <form class="form-horizontal" action="/review" method="POST" role=form>
            {{ form.csrf_token }}
            <fieldset>
              <div id="legend">
                <legend class="">Write a Review</legend>
              </div>
              <div class="control-group">
                <label class="control-label" for="state">Select a State</label>
                <div class="controls">
                  <!--<input type='text' id='course' name='course' placeholder='Enter course name' class='form-control input-lg' data-source='{{ courses }}'>-->
                  <select name='state' id='state'>
                    <option disabled='True' selected='selected'>Select a State</option>
                    {% for state in states %}
                      <option value='{{ state }}'>{{ state }}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="course">Select a Course</label>
                <div class="controls">
                  <!--<input type='text' id='course' name='course' placeholder='Enter course name' class='form-control input-lg' data-source='{{ courses }}'>-->
                  <select name='course' id='course'>
                    <option disabled='True' selected='selected'>Select a Course</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Write a Review</label>
                <div class="controls">
                  <input type='textarea' id='review' name='review' placeholder='Write a review' class='form-control input-md'>

                  <!--<input type="text" id="username" name="username" placeholder="Username" class="form-control input-lg">
                  <p class="help-block">Username can contain any letters or numbers, without spaces</p> -->
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Overall Rating</label>
                <div class="controls">
                  <select name='rating' id='rating'>
                    <option disabled='True' selected='selected'>Rate course overall</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Course Conditions</label>
                <div class="controls">
                  <select name='condition' id='condition'>
                    <option disabled='True' selected='selected'>Rate course conditions</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Course Difficulty</label>
                <div class="controls">
                  <select name='difficulty' id='difficulty'>
                    <option disabled='True' selected='selected'>Rate course difficulty</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Course Layout</label>
                <div class="controls">
                  <select name='layout' id='layout'>
                    <option disabled='True' selected='selected'>Rate course layout</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Pace of Play</label>
                <div class="controls">
                  <select name='pace' id='pace'>
                    <option disabled='True' selected='selected'>Rate pace of play</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Staff Friendliness</label>
                <div class="controls">
                  <select name='staff' id='staff'>
                    <option disabled='True' selected='selected'>Rate staff friendliness</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Value for the money</label>
                <div class="controls">
                  <select name='value' id='value'>
                    <option disabled='True' selected='selected'>Rate course value</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>

              <div class="control-group">
                <label class="control-label" for="review">Course Amenities</label>
                <div class="controls">
                  <select name='amenities' id='amenities'>
                    <option disabled='True' selected='selected'>Rate course amenities</option>
                    <option value='1'>1</option>
                    <option value='2'>2</option>
                    <option value='3'>3</option>
                    <option value='4'>4</option>
                    <option value='5'>5</option>
                  </select>
                </div>
              </div>
              <br>
              <div class="control-group">
                <!-- Button -->
                <div class="controls">
                  <button class="btn btn-success" type='submit'>Submit Review</button>
                </div>
              </div>
  </div>
</section>
{% endblock %}
{% block script %}
<script type=text/javascript>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>
<script>
$('#state').on('change', function() {

      $("#course").empty();

      state_name = $("#state option:selected").text();
      state_id = $("#state option:selected").val();

      //Sending variables containing selection info to parse_data function in python.
      // jQuery's builtin ajax functions make things super easy

      // Calling that parse url and sending it arguments
      $.getJSON($SCRIPT_ROOT + '/_parse_data', {
          a: state_name

      // Function to get data returned from parse_data and populate the second select field.
      }, function(data) {
          // Using jQuery to populate new entries we got from flask.
          var options = $("#course");
          $.each(data, function() {
              options.append($("<option />").val(this).text(this));
          });

      });
    });
</script>


{% endblock %}
